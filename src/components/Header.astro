---
import {KNOWN_LANGUAGES, getLanguageFromURL, getSlugFromURL } from '../data/languages.ts';

let languages = Object.keys(KNOWN_LANGUAGES)

const currentPath = Astro.request.url.pathname;
const lang = currentPath && getLanguageFromURL(currentPath);
const slug = currentPath && getSlugFromURL(currentPath)
/*Use dictionnary to translate nav items*/
---
<header>
    <nav class="navbar">
        <section class="navbar-section">
            <a class="nav-item" href="./">
                <img id="navlogo" src="/style/img/ouvroir.png">
                <span>Ouvroir</span>
            </a>
        </section>
        <section class="navbar-section">
            <a class="nav-item" href="./services">
                <span>Services</span>
            </a>

            <a class="nav-item" href="./projets">
                <span>Projets</span>
            </a>

            <a class="nav-item" href="./actualites">
                <span>Actualité</span>
            </a>

            <a class="nav-item" href="./info">
                <span>i</span>
            </a>
            <div class="nav-item" client:idle>
                <select id="language-select" value={lang} onChange={e => {
                    const newLang = e.target.value;
                    window.location.assign(`/${newLang}/${slug}`)
                }}>
                    {languages.map(l => <option key={l} value={KNOWN_LANGUAGES[l]}>{l}</option>)}
                </select>
            </div>
        </section>
    </nav>
</header>

<style>
    header {
        height: 4rem;
        padding-top: 1rem;   
        padding-bottom: 1rem;   

    }

    nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }


    .nav-item {
        display: flex;
        flex-grow: 0;
        gap: 0.5em;
        align-items: center;
        justify-content: center;
        /*à définir color: var(--theme-text-lighter)*/
        font-size: 1.5rem;
        padding: 0.5rem;
    }
    .nav-item:hover {
       /*à définir color: var(--theme-accent); */
       color: red
    }
    
    #navlogo {
        width: 2rem;
        height: 2rem;
    }
</style>