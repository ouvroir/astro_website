---
import {
    KNOWN_LANGUAGES, 
    getLanguageFromURL,
    mapGenericToSlug, 
    mapSlugToGeneric
} from '../data/languages.ts';

let languages = Object.keys(KNOWN_LANGUAGES);

const currentPath = Astro.request.url.pathname;
const lang = currentPath && getLanguageFromURL(currentPath);

console.log(currentPath)

const currentSlug = Astro.props.slug
console.log('currentSlug:', currentSlug)

const currentGeneric = mapSlugToGeneric[currentSlug]


console.log(currentGeneric)
const SlugFR = mapGenericToSlug[currentGeneric]['fr'];

const SlugEN = mapGenericToSlug[currentGeneric]['en'];

console.log(SlugFR)
console.log(SlugEN)
---



<style>
    header {
        height: 4rem;
        padding-top: 1rem;   
        padding-bottom: 1rem;   

    }   

    nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .nav-item {
        display: flex;
        flex-grow: 0;
        gap: 0.5em;
        align-items: center;
        justify-content: center;
        /*à définir color: var(--theme-text-lighter)*/
        font-size: 1.5rem;
        padding: 0.5rem;
    }
    .nav-item:hover {
       /*à définir color: var(--theme-accent); */
       color: red
    }
    
    #navlogo {
        width: 2rem;
        height: 2rem;
    }
</style>

<header>
    <nav class="navbar">    
        <section class="navbar-section">
            <a class="nav-item" href={`/${lang}/`}>
                <img id="navlogo" src="/style/img/ouvroir.png">
                <span>Ouvroir</span>
            </a>
        </section>
        <section class="navbar-section">
            <a class="nav-item" href={`/${lang}/${mapGenericToSlug["SERVICES"][lang]}/`}>
                <span>Services</span>
            </a>

            <a class="nav-item" href={`/${lang}/${mapGenericToSlug["PROJETS"][lang]}/`}>
                <span>Projets</span>
            </a>

            <a class="nav-item" href={`/${lang}/${mapGenericToSlug["BLOG"][lang]}/`}>
                <span>Actualité</span>
            </a>

            <a class="nav-item" href={`/${lang}/${mapGenericToSlug["INFO"][lang]}/`}>
                <span>i</span>
            </a>
            <div class="nav-item">
                {languages.map(l => <a href={currentSlug ? `/${KNOWN_LANGUAGES[l]}/${mapGenericToSlug[currentGeneric][KNOWN_LANGUAGES[l]]}/` : `/${KNOWN_LANGUAGES[l]}/`}>{KNOWN_LANGUAGES[l]}</a>
                )}
            </div>
        </section>
    </nav>
</header>
