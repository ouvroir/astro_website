---
import {
    mapGenericToText,
    getLanguageFromURL,
    mapGenericToSlug
} from '../data/languages.ts';

export interface Props{
    post: any;
}

const currentPath = Astro.request.url.pathname;
const lang = currentPath && getLanguageFromURL(currentPath);

const { post } = Astro.props;
let tags = post.tags;
let date = new Date(post.publishDate)

let path = currentPath.includes("/tags/") ? currentPath.replace("/tags","").concat(post.slug) : currentPath.concat(post.slug)
---
<article class="section">
    <header>
        <a href={`/${lang}/${mapGenericToSlug["ACTUALITES"][lang]}/${post.slug}`}><h3 class="title">{post.title}</h3></a>
    </header>
    <p>{post.description}<br>{date.getDate()}.{date.getMonth()}.{date.getFullYear()}</p>
    <div>{tags.map(t => <span class="chip">{t}</span>)}</div>
    <a href={`/${lang}/${mapGenericToSlug["ACTUALITES"][lang]}/${post.slug}`}>{mapGenericToText["LIRE_SUITE"][lang]}</a>
</article>

<style>

</style>