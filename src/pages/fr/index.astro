---
import BaseLayout from '/src/layouts/BaseLayout.astro';
import {Markdown} from 'astro/components';
import BlogPostPreview from '/src/components/BlogPostPreview.astro';
import ProjectCardPreview from '/src/components/ProjectCardPreview.astro';
import {
    getLanguageFromURL,
    mapGenericToText
} from '/src/data/languages.ts';

const currentPath = Astro.canonicalURL.pathname;
const lang = currentPath && getLanguageFromURL(currentPath);

let title = "Ouvroir"
let slug = ""
let description = "Laboratoire d’histoire de l’art et de muséologie numériques"
let permalink = "https://ouvroir.umontreal.ca/"

let projects = await Astro.glob('/src/_labouvroir/projets/*-fr.md');

projects = projects.filter(d => d.frontmatter.draft == false); 
---

<BaseLayout title={title} description={description} permalink={permalink} slug={slug}>


  <section class="columns">
    <div class="column toast">
      <button class="btn btn-clear float-right"></button>
      <h2>{mapGenericToText["PRESENTATION"][lang]}</h2>
<!-- présentation-->
    </div>
  </section>
<!-- 
  <section class="columns">
    <h2 class="column col-12">Actualités</h2>
      {posts.map(p => <BlogPostPreview post={p}/>)}
  </section> -->

  <section class="columns">
    <h2 class="column col-12">{mapGenericToText["MENU_PROJETS"][lang]}</h2>
      {projects.map(p => <ProjectCardPreview post={p}/>)}
  </section>
  
  <section class="columns">
    <h2 class="column col-12">{mapGenericToText["CREDITS"][lang]}</h2><!-- je ne pense pas que ce soit le bon terme-->
<!--financement-->
  </section>
  
  <div class="columns">  <!-- to make responsive with grid-xs to have logo beneath in xs view? -->
    <div class="column col-2 col-sm-3 col-mx-auto logo">
      <img src='/style/img/UdeM/Logo_UdeM-RVB.png' width="100%"/>
    </div>
    <div class="column col-2 col-sm-3 col-mx-auto logo">
      <img src='/style/img/CFI/fr/CFI_RGB-FR.png' width="100%"/>
    </div>
    <div class="column col-2 col-sm-37 col-mx-auto logo">
      <img src='/style/img/qc/svg/QUEBEC_couleur.svg' width="100%"/>
    </div>
  </div>   

</BaseLayout>
