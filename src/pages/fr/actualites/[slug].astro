---
export async function getStaticPaths() {
  let blog = Astro.fetchContent('/src/_blog/*-fr.md');
  let cr = Astro.fetchContent('/src/_labouvroir/cr/*.md')

  let all = blog.concat(cr)
  return all.map((post) => {
      //s'il n'y a pas de slug, c'est un cr
      //créer un slug à partir de la date en enlevant l'heure
        if (!post.slug)
            post.slug = `cr${post.date.replace('T00:00:00.000Z', '')}`
      //enlever le Z pour ne pas être en UTC 
        console.log(post.slug)    
        return {
            params: { slug: post.slug },
            props: {post} };
    });
}

import BlogLayout from '/src/layouts/BlogLayout.astro';

const {post} = Astro.props;

---
<BlogLayout content={post} slug={post.slug}>
  {post.astro.html}
</BlogLayout>
